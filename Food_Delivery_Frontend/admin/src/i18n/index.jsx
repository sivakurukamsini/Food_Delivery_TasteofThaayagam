import { useEffect, useState } from 'react';
import { I18nContext } from './context';

// Simple i18n implementation (no dependencies) with localStorage persistence
const defaultLang = localStorage.getItem('lang') || 'en';

const translations = {
  en: {
    // Dashboard
    dashboardTitle: 'Dashboard',
    totalOrders: 'Total Orders',
    totalRevenue: 'Total Revenue',
    totalUsers: 'Total Users',
    totalSuppliers: 'Total Suppliers',
    ordersOverTime: 'Orders Over Time',
    suppliersStatus: 'Suppliers Status',
    orderAmount: 'Order Amount',
    active: 'Active',
    inactive: 'Inactive',

    allUsers: 'All Users',
    searchPlaceholder: 'Search by name...',
    addUser: '+ Add User',
    // Sidebar / common
    addItems: 'Add Items',
    listItems: 'List Items',
    orders: 'Orders',
    reservation: 'Reservation',
    user: 'User',
    supplier: 'Supplier',
  helpSupport: 'Help & Support',
    logout: 'Logout',
    password: 'Password',
  uploadImage: 'Upload image',
  productName: 'Product name',
  typeHere: 'Type here',
  productDescription: 'Product description',
  writeHere: 'Write content here',
  productCategory: 'Product category',
  productPrice: 'Product Price',
  pricePlaceholder: '25',
  addBtn: 'ADD',
  allFoods: 'All Foods List',
  searchByNameCategory: 'Search by name or category...',
  image: 'Image',
  name: 'Name',
  category: 'Category',
  price: 'Price',
  downloadPDF: 'Download PDF',
  deleteConfirmItem: 'Are you sure you want to delete this item?',
  yes: 'Yes',
  no: 'No',
    generateReport: 'Generate Report',
    downloadCSV: 'Download CSV',
    noUsers: 'No users found',
    firstName: 'First Name',
    lastName: 'Last Name',
    email: 'Email',
    phone: 'Phone',
    action: 'Action',
    save: 'Save',
    update: 'Update',
    cancel: 'Cancel',
    deleteConfirm: 'Are you sure you want to delete',
    ordersTitle: 'Orders',
    ordersSearchPlaceholder: 'Search by name or id...',
    pdfReportGenerated: 'PDF report generated',
    pdfGenerateFailed: 'Failed to generate PDF',
    errorFetchingOrders: 'Error fetching orders',
    errorUpdatingStatus: 'Error updating status',
    items: 'Items',
    statusFoodProcessing: 'Food Processing',
    statusOutForDelivery: 'Out for delivery',
    statusDelivered: 'Delivered',
    ordersCancelConfirm: 'Are you sure you want to cancel this order?',
    orderDeletedSuccess: 'Order deleted successfully',
    orderDeleteFailed: 'Failed to delete order',
    errorDeletingOrder: 'Error deleting order',
    ok: 'OK',
  // Supplier page
  allSuppliers: 'All Suppliers',
  addSupplier: '+ Add Supplier',
  suppliersReportTitle: 'Suppliers Report',
  suppliersPerLocation: 'Suppliers per Location',
  suppliersDistributionPie: 'Suppliers Distribution (Pie)',
  noSuppliersToGenerate: 'No suppliers to generate report',
  noSuppliersToDownload: 'No suppliers to download',
  csvDownloaded: 'CSV downloaded successfully!',
  supplierAdded: 'Supplier added',
  supplierAddFailed: 'Failed to add supplier',
  errorAddingSupplier: 'Error adding supplier',
  supplierUpdated: 'Supplier updated',
  supplierUpdateFailed: 'Failed to update supplier',
  errorUpdatingSupplier: 'Error updating supplier',
  supplierDeleted: 'Supplier deleted',
  supplierDeleteFailed: 'Failed to delete supplier',
  errorDeletingSupplier: 'Error deleting supplier',
  noSuppliersFound: 'No suppliers found',
  headerName: 'Name',
  headerLocation: 'Location',
  headerContact: 'Contact',
  headerItem: 'Item',
  headerQty: 'Qty',
  headerStatus: 'Status',
  headerAction: 'Action',
  placeholderName: 'Name',
  placeholderLocation: 'Location',
  placeholderContact: 'Contact',
  placeholderItemName: 'Item Name',
  placeholderQuantity: 'Quantity',
  statusActive: 'Active',
  statusInactive: 'Inactive',
  editSupplierTitle: 'Edit Supplier',

  // Reservation page
  allReservations: 'All Reservations',
  addReservation: '+ Add Reservation',
  reservationAdded: 'Reservation added',
  reservationAddFailed: 'Failed to add reservation',
  errorAddingReservation: 'Error adding reservation',
  reservationUpdated: 'Reservation updated',
  reservationUpdateFailed: 'Failed to update reservation',
  errorUpdatingReservation: 'Error updating reservation',
  reservationDeleted: 'Reservation deleted',
  reservationDeleteFailed: 'Failed to delete reservation',
  errorDeletingReservation: 'Error deleting reservation',
  noReservationsFound: 'No reservations found',
  fullName: 'Full Name',
  emailPlaceholder: 'Email',
  phonePlaceholder: 'Phone Number',
  tableNumberPlaceholder: 'Table Number',
  reservationDatePlaceholder: 'Reservation Date',
  timePlaceholder: 'Time',
  guestsPlaceholder: 'Guests',
  editReservationTitle: 'Edit Reservation',
  },
  ta: {
    // Dashboard (Tamil)
    dashboardTitle: 'டாஷ்போர்டு',
    totalOrders: 'மொத்த ஆர்டர்கள்',
    totalRevenue: 'மொத்த வருவாய்',
    totalUsers: 'மொத்த பயனர்கள்',
    totalSuppliers: 'மொத்த வழங்குநர்கள்',
    ordersOverTime: 'நேரத்தின் மூலம் ஆர்டர்கள்',
    suppliersStatus: 'வழங்குநர்களின் நிலை',
    orderAmount: 'ஆர்டர் தொகை',
    active: 'செயலில்',
    inactive: 'செயலில் இல்லை',

    allUsers: 'அனைத்து பயனர்கள்',
    searchPlaceholder: 'பெயரால் தேடுக...',
    addUser: '+ பயனரை சேர்',
    // Sidebar / common (Tamil)
    addItems: 'உருப்படியை சேர்க்க',
    listItems: 'உருப்படிகள் பட்டியல்',
    orders: 'ஆணைகள்',
    reservation: 'முன்பதிவு',
    user: 'பயனர்',
    supplier: 'வழங்குநர்',
  helpSupport: 'உதவி & ஆதரவு',
    logout: 'வெளியேறு',
    password: 'கடவுச்சொல்',
  uploadImage: 'படத்தை பதிவேற்றவும்',
  productName: 'தயாரிப்பு பெயர்',
  typeHere: 'இங்கே تایபு செய்யவும்',
  productDescription: 'தயாரிப்பு விவரம்',
  writeHere: 'இங்கே உள்ளடக்கத்தை எழுதுக',
  productCategory: 'தயாரிப்பு வகை',
  productPrice: 'தயாரிப்பு விலை',
  pricePlaceholder: '25',
  addBtn: 'சேர்க்க',
  allFoods: 'அனைத்து உணவுகள் பட்டியல்',
  searchByNameCategory: 'பெயர் அல்லது வகை மூலம் தேடுக...',
  image: 'படம்',
  name: 'பெயர்',
  category: 'வகை',
  price: 'விலை',
  downloadPDF: 'PDF பதிவிறக்கு',
  deleteConfirmItem: 'இந்த உருப்படியை நீக்க விரும்புகிறீர்களா?',
  yes: 'ஆம்',
  no: 'இல்லை',
    generateReport: 'அறிக்கை உருவாக்கவும்',
    downloadCSV: 'CSV பதிவிறக்கு',
    noUsers: 'பயனர்கள் இல்லை',
    firstName: 'முதல் பெயர்',
    lastName: 'கடைசி பெயர்',
    email: 'மின்னஞ்சல்',
    phone: 'தொலைபேசி',
    action: 'செயல்',
    save: 'சேமிக்க',
    update: 'புதுப்பிக்க',
    cancel: 'விடு',
    deleteConfirm: 'நீங்கள் realmente நீக்க விரும்புகிறீர்களா',
    ordersTitle: 'ஆணைகள்',
    ordersSearchPlaceholder: 'பெயர் அல்லது ஐடி மூலம் தேடுக...',
    pdfReportGenerated: 'PDF அறிக்கை உருவாக்கப்பட்டது',
    pdfGenerateFailed: 'PDF உருவாக்க தோல்வி',
    errorFetchingOrders: 'ஆணைகள் பெறுவதில் பிழை',
    errorUpdatingStatus: 'நிலை புதுப்பிப்பதில் பிழை',
    items: 'உருப்படிகள்',
    statusFoodProcessing: 'உணவு செயலாக்கம்',
    statusOutForDelivery: 'வகுப்பிற்கு வெளியே',
    statusDelivered: 'விநியோகிக்கப்பட்டது',
    ordersCancelConfirm: 'இந்த ஆணையை ரத்து செய்ய நீங்கள் நிச்சயமாக ஆசைப்படுகிறீர்களா?',
    orderDeletedSuccess: 'ஆணை வெற்றிகரமாக நீக்கப்பட்டது',
    orderDeleteFailed: 'ஆணையை நீக்க முடியவில்லை',
    errorDeletingOrder: 'ஆணை நீக்குவதில் பிழை',
    ok: 'சரி',
    // Supplier page (Tamil)
    allSuppliers: 'அனைத்து வழங்குநர்கள்',
    addSupplier: '+ வழங்குநர் சேர்க்க',
    suppliersReportTitle: 'வழங்குநர்களின் அறிக்கை',
    suppliersPerLocation: 'இடம்வரை வழங்குநர்கள்',
    suppliersDistributionPie: 'வழங்குநர்கள் பகிர்வு (பை)',
    noSuppliersToGenerate: 'அறிக்கை உருவாக்குவதற்கு வழங்குநர்கள் இல்லை',
    noSuppliersToDownload: 'பதிவிறக்க பொருந்த வழங்குநர்கள் இல்லை',
    csvDownloaded: 'CSV வெற்றிகரமாக பதிவிறக்கப்பட்டது!',
    supplierAdded: 'வழங்குநர் சேர்க்கப்பட்டது',
    supplierAddFailed: 'வழங்குநர் சேர்க்க முடியவில்லை',
    errorAddingSupplier: 'வழங்குநர் சேர்க்கையில் பிழை',
    supplierUpdated: 'வழங்குநர் புதுப்பிக்கப்பட்டது',
    supplierUpdateFailed: 'வழங்குநர் புதுப்பிக்க முடியவில்லை',
    errorUpdatingSupplier: 'வழங்குநர் புதுப்பிப்பதில் பிழை',
    supplierDeleted: 'வழங்குநர் நீக்கப்பட்டது',
    supplierDeleteFailed: 'வழங்குநரை நீக்க முடியவில்லை',
    errorDeletingSupplier: 'வழங்குநரை நீக்கும் போது பிழை',
    noSuppliersFound: 'வழங்குநர்கள் இல்லை',
    headerName: 'பெயர்',
    headerLocation: 'இடம்',
    headerContact: 'தொடர்பு',
    headerItem: 'உருப்படி',
    headerQty: 'அளவு',
    headerStatus: 'நிலை',
    headerAction: 'செயல்',
    placeholderName: 'பெயர்',
    placeholderLocation: 'இடம்',
    placeholderContact: 'தொடர்பு',
    placeholderItemName: 'உருப்படி பெயர்',
    placeholderQuantity: 'அளவு',
    statusActive: 'செயலில்',
    statusInactive: 'செயலில் இல்லாதது',
    editSupplierTitle: 'வழங்குநரை திருத்து',

    // Reservation page (Tamil)
    allReservations: 'அனைத்து முன்பதிவுகள்',
    addReservation: '+ முன்பதிவு சேர்க்க',
    reservationAdded: 'முன்பதிவு சேர்க்கப்பட்டது',
    reservationAddFailed: 'முன்பதிவை சேர்க்க முடியவில்லை',
    errorAddingReservation: 'முன்பதிவு சேர்க்கையில் பிழை',
    reservationUpdated: 'முன்பதிவு புதுப்பிக்கப்பட்டது',
    reservationUpdateFailed: 'முன்பதிவை புதுப்பிக்க முடியவில்லை',
    errorUpdatingReservation: 'முன்பதிவு புதுப்பிப்பில் பிழை',
    reservationDeleted: 'முன்பதிவு நீக்கப்பட்டது',
    reservationDeleteFailed: 'முன்பதிவை நீக்க முடியவில்லை',
    errorDeletingReservation: 'முன்பதிவை நீக்கும் போது பிழை',
    noReservationsFound: 'முன்பதிவுகள் இல்லை',
    fullName: 'முழுப் பெயர்',
    emailPlaceholder: 'மின்னஞ்சல்',
    phonePlaceholder: 'தொலைபேசி',
    tableNumberPlaceholder: 'மேசை எண்',
    reservationDatePlaceholder: 'முன்பதிவு நாள்',
    timePlaceholder: 'நேரம்',
    guestsPlaceholder: 'விருந்து நண்பர்கள்',
    editReservationTitle: 'முன்பதிவை திருத்து',
  },
  si: {
    // Dashboard (Sinhala)
    dashboardTitle: 'ඩෑෂබෝර්ඩ්',
    totalOrders: 'මුළු ඇණවුම්',
    totalRevenue: 'මුළු ආදායම',
    totalUsers: 'මුළු පරිශීලකයන්',
    totalSuppliers: 'මුළු සැපයුම්කරුවන්',
    ordersOverTime: 'කාලය අනුව ඇණවුම්',
    suppliersStatus: 'සැපයුම්කරුවන්ගේ තත්ත්වය',
    orderAmount: 'ඇණවුම් මුදල',
    active: 'සක්‍රීය',
    inactive: 'නिषක්‍රීය',

    allUsers: 'පරිශීලක සියලු',
    searchPlaceholder: 'නම අනුව සෙවීම...',
    addUser: '+ පරිශීලකයා එක් කරන්න',
    // Sidebar / common (Sinhala)
    addItems: 'අයිතම එකතු කරන්න',
    listItems: 'අයිතම් ලැයිස්තුව',
    orders: 'ඇණවුම්',
    reservation: 'වෙන්කිරීම',
    user: 'පරිශීලක',
    supplier: 'සැපයුම්කරු',
  helpSupport: 'උදවු සහ සහය',
    logout: 'ඉවත්වීම',
    password: 'මුරපදය',
  uploadImage: 'ඡායාරූපය උඩුගත කරන්න',
  productName: 'නිෂ්පාදන නාමය',
  typeHere: 'එතන ටයිප් කරන්න',
  productDescription: 'නිෂ්පාදන විස්තරය',
  writeHere: 'මෙහි අන්තර්ගතය ලියන්න',
  productCategory: 'නිෂ්පාදන ප්‍රවර්ගය',
  productPrice: 'නිෂ්පාදන මිල',
  pricePlaceholder: '25',
  addBtn: 'එකතු කරන්න',
  allFoods: 'සියලු ආහාර ලැයිස්තුව',
  searchByNameCategory: 'නම හෝ class අනුව සෙවන්න...',
  image: 'පින්තූරය',
  name: 'නම',
  category: 'වර්ගය',
  price: 'මිල',
  downloadPDF: 'PDF බාගත කරන්න',
  deleteConfirmItem: 'මෙම අයිතමය මකන්න අවශ්ද?',
  yes: 'ඔව්',
  no: 'නැහැ',
    generateReport: 'රියපද සැකසීම',
    downloadCSV: 'CSV බාගත කරන්න',
    noUsers: 'පරිශීලකයන් නොමැත',
    firstName: 'පළමු නාමය',
    lastName: 'අග නාමය',
    email: 'ඊමේල්',
    phone: 'දුරකථন',
    action: 'ක්‍රියාව',
    save: 'සුරකින්න',
    update: 'යාවත්කාලීන කරන්න',
    cancel: 'ඉවත්වන්න',
    deleteConfirm: 'ඔබ මකා දැමීමට කැමතිද',
    ordersTitle: 'ඇණවුම්',
    ordersSearchPlaceholder: 'නම හෝ id අනුව සොයන්න...',
    pdfReportGenerated: 'PDF වාර්තාව ජනනය කරන ලදි',
    pdfGenerateFailed: 'PDF ජනනය කිරීම අසාර්ථකයි',
    errorFetchingOrders: 'ඇණවුම් ගන්නා අවස්ථාවේ දෝෂයක්',
    errorUpdatingStatus: 'තත්ත්වය යාවත්කාලීන කිරීමට දෝෂයක්',
    items: 'අයිතම',
    statusFoodProcessing: 'ආහාර සැකසුම්',
    statusOutForDelivery: 'බැහැර බෙදාහරින ලද',
    statusDelivered: 'බෙදාහරින්නා',
    ordersCancelConfirm: 'මෙම ඇණවුම අවලංගු කිරීමට ඔබට විශ්වාසද?',
    orderDeletedSuccess: 'ඇණවුම සාර්ථකව මකා දමන ලදි',
    orderDeleteFailed: 'ඇණවුම මකා දැමීමට නොහැකි විය',
    errorDeletingOrder: 'ඇණවුම මකන විට දෝෂයකි',
    ok: 'ඔකේ',
    // Supplier page (Sinhala)
    allSuppliers: 'සියලු සැපයුම්කරුවන්',
    addSupplier: '+ සැපයුම්කරු එක් කරන්න',
    suppliersReportTitle: 'සැපයුම්කරුවන් වාර්තාව',
    suppliersPerLocation: 'ස්ථානය අනුව සැපයුම්කරුවන්',
    suppliersDistributionPie: 'සැපයුම්කරුවන් බෙදාහැරීම (පයි)',
    noSuppliersToGenerate: 'වාර්තාව ජනනය කිරීමට සැපයුම්කරුවන් නොමැත',
    noSuppliersToDownload: 'බාගත කිරීමට සැපයුම්කරුවන් නොමැත',
    csvDownloaded: 'CSV සාර්ථකව බාගත කරන ලදි!',
    supplierAdded: 'සැපයුම්කරු එක් කරන ලදි',
    supplierAddFailed: 'සැපයුම්කරු එක් කළ නොහැක',
    errorAddingSupplier: 'සැපයුම්කරු එක් කරනවදී දෝෂයක්',
    supplierUpdated: 'සැපයුම්කරු යාවත්කාලීන කරන ලදි',
    supplierUpdateFailed: 'සැපයුම්කරු යාවත්කාලීන කළ නොහැක',
    errorUpdatingSupplier: 'සැපයුම්කරු යාවත්කාලීන කිරීමේ දෝෂය',
    supplierDeleted: 'සැපයුම්කරු මකා දමන ලදි',
    supplierDeleteFailed: 'සැපයුම්කරු මකා දැමිය නොහැක',
    errorDeletingSupplier: 'සැපයුම්කරු මකද්දී දෝෂයක්',
    noSuppliersFound: 'සැපයුම්කරුවෝ නොමැත',
    headerName: 'නම',
    headerLocation: 'ස්ථානය',
    headerContact: 'සම්බන්ධතා',
    headerItem: 'අයිතමය',
    headerQty: 'ප්රමාණය',
    headerStatus: 'ස්ථාවරය',
    headerAction: 'ක්‍රියාව',
    placeholderName: 'නම',
    placeholderLocation: 'ස්ථානය',
    placeholderContact: 'සම්බන්ධතා',
    placeholderItemName: 'අයිතමයේ නම',
    placeholderQuantity: 'ප්රමාණය',
    statusActive: 'සක්‍රීය',
    statusInactive: 'නिषක්‍රීය',
    editSupplierTitle: 'සැපයුම්කරු සංස්කරණය කරන්න',

    // Reservation page (Sinhala)
    allReservations: 'සියලු වෙන්කිරීම්',
    addReservation: '+ වෙන්කිරීම එක් කරන්න',
    reservationAdded: 'වෙන්කිරීම එක් කර ඇත',
    reservationAddFailed: 'වෙන්කිරීම එක් කළ නොහැක',
    errorAddingReservation: 'වෙන්කිරීම එක් කිරීමේ දෝෂයක්',
    reservationUpdated: 'වෙන්කිරීම යාවත්කාලීන කළා',
    reservationUpdateFailed: 'වෙන්කිරීම යාවත්කාලීන කළ නොහැක',
    errorUpdatingReservation: 'වෙන්කිරීම යාවත්කාලීන කිරීමේ දෝෂය',
    reservationDeleted: 'වෙන්කිරීම මකා දැමිණි',
    reservationDeleteFailed: 'වෙන්කිරීම මකන පාර්ශවය අසාර්ථකයි',
    errorDeletingReservation: 'වෙන්කිරීම මකද්දී දෝෂයක්',
    noReservationsFound: 'වෙන්කිරීම් නොමැත',
    fullName: 'සම්පූර්ණ නම',
    emailPlaceholder: 'ඊමේල්',
    phonePlaceholder: 'දුරකථන',
    tableNumberPlaceholder: 'මේස අංකය',
    reservationDatePlaceholder: 'වෙන්කිරීම් දිනය',
    timePlaceholder: 'කාලය',
    guestsPlaceholder: 'අමුත්තා',
    editReservationTitle: 'වෙන්කිරීම සංස්කරණය කරන්න',
  },
};

// eslint-disable-next-line react/prop-types
export const I18nProvider = ({ children }) => {
  const [lang, setLang] = useState(defaultLang);

  useEffect(() => {
    localStorage.setItem('lang', lang);
  }, [lang]);

  const t = (key) => {
    return translations[lang] && translations[lang][key]
      ? translations[lang][key]
      : translations['en'][key] || key;
  };

  return (
    <I18nContext.Provider value={{ lang, setLang, t }}>
      {children}
    </I18nContext.Provider>
  );
};

export default I18nContext;
